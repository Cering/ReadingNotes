# 《系统架构：复杂系统的产品设计与开发》

## 总结&思考

本书要展示的是如果思考，而不是具体应该思考哪些内容。目标是帮助读者形成一套思考并创建系统架构的方式，而不是提供一套过程，形成一套自己的架构原则，所做的决策、使用的方法和工具，都应该建立在这套原则之上。

## 摘录

### 第1章 系统架构简介

- 如果能够找出使系统架构得以确立的**决策点**，并谨慎地做出决策，那么系统更有可能取得成功
- 早期的架构决策对最终设计有重大影响，**结构良好**的创造活动要优于毫无结构的创造活动
- 错误的架构可能会毁掉整个项目，而正确的架构**仅仅**是创建了一个产品开发平台，产品可以依赖这个平台而取得成功，但也依然有可能失败

### 第2章 系统思维

- 一位准备工作做得比较充分的思考者，能够使用**各种**思维模式来进行思考，而且还能够**意识**到自己当前正在使用的是哪一种思维模式
- 系统是由一组**实体**和这些实体之间的**关系**所构成的集合，其功能要大于这些实体各自的功能之和
- **涌现原则**：当各实体拼合成一个系统时，实体之间的交互会把功能、行为、性能和其他内在属性涌现出来。我们要思考并试着探寻系统所涌现出的**预期属性**和**意外属性**
- 价值就是有着一定成本的利益，构建系统的目的就是为了**获得利益**
- **系统思维的第一项任务**：确定系统及其**形式**(系统是什么)与**功能**(系统做什么)，功能又可以拆分为**过程**和**操作数**，以上为系统的三大特征
- **系统思维的第二项任务**：确定系统中的实体、实体的形式与功能，以及系统**边界**和系统所处的**环境**
- **整体原则**：每个系统都作为某一个或某些个大系统的一小部分而动作，同时每个系统中也都包含着更小的一些系统。需要**整体地思考这些关系**，并研发出与上级系统、下级系统和平级系统相协调的架构
- **聚焦原则**：在任何一个点上，都能发现很多影响系统的问题，而其数量已经超出了人的理解能力。因此我们必须找出其中**最关键、最重要**的那些问题，并集中精力思考它们
- 创建**抽象**，可以把实体的重要细节呈显出来，又能把其它一些复杂的方面隐藏起来；定义系统**边界**，可以将系统与其外围环境相分离
- **系统思维的第三项任务**：找出系统内及系统边界处的那些实体之间所具备的**关系**，以及那些关系的形式与功能
- **系统思维的第四项任务**：基于实体的功能以及实体之间的功能互动，来确定系统的**涌现属性**。预测涌现物的四种方式：根据先例预测、试验、建模、推理
- 系统思维的初级目标是理解系统是什么并了解其**意义**，高级目标是**预测**系统在某物发生变化后的情况，进阶目标是在决策时提供必要的知识用于**判断和权衡**，终极目标是用部件来**合成整个系统**

### 第3章 思考复杂的系统

- 一个良好的系统架构，应该是一个具备必要的**复杂**度同时又**不难懂**的系统
- 把系统分解成部件的难点不在于分解，而是体现在用分解出来的实体构建整个系统的过程，即**整合**
- 对系统进行分解后，每个上级部件所统领的下级部件最好不要超过**7个**，因为在把握各部件交互关系的前提下，人脑可以同时思考的事情是有限的
- 凡是一经拆解就失去意义的东西，可以称为**原子部件**
- 实体之间关系包括**类/实例**关系、**特化/泛化**关系、**递归**关系
- 对复杂系统的**思考方法**：自顶向下，自底向上，由外向内，由内向外，交替思考
- 两种展示复杂系统的主流框架：**SysML**使用多张视图或图表来呈现系统的不同方面，**OPM**把系统的多个方面都融合到一个主模型中

### 第4章 形式

- 形式由**对象**(形式元素)与**结构**(形式关系)组成，这两部分都位于系统中，分析系统时都必须要考虑
- 对形式进行分析，就必须为其创建一种含有重要信息的**抽象**，但这种抽象所包括的信息不宜过多，并且还要能体现出系统的**边界**
- 结构关系的主要类型有两种：**空间/拓扑关系**，描述形式对象的位置或布局；**连接关系**，描述对象与谁连接或汇合
- 形式关系对功能交互具有**促进**作用，并影响着功能交互的**性质**及功能与性能的**涌现**
- **二元原则**：分析系统时，应该从**物理**领域和**信息**领域两种角度分别进行思考
- 分析系统形式的思路：
    - 系统是什么
    - 主要的形式元素是什么
    - 形式结构是什么
    - 伴生系统、产品系统是什么
    - 系统边界、接口是什么
    - 使用情景是什么

### 第5章 功能

- **功能=过程+操作数**，操作数是一种对象类型，过程是对象所经历的一种转换模式
- 操作数与过程的关系有三种：**创建**、**消耗**、**影响**
- 功能必须以**外在的方式**得到执行，才能体现出系统的价值；架构师应该优先考虑**主要功能**，而不要把精力过多浪费在次要功能上
- **受益原则**：好的架构必须使人受益，要想把架构做好，就要专注于功能的涌现，使得系统能够把主要功能通过跨越系统边界的接口对外展示出来
- 功能架构中有一条由内部操作数和过程所形成的**价值通路**，与价值有关的外部功能，会沿着这条通路涌现出来
- 分析系统功能的思路：
    - 系统的主要功能是什么，有哪些操作数
    - 主要内部功能是什么
    - 功能架构是什么，怎样连接成价值通路
    - 其它较重要的次要外部功能是什么

### 第6章 系统架构

- 确定系统架构时应思考的问题
    - 工具对象怎样与内部过程相映射？形式结构怎样支持功能交互？它怎样影响系统的涌现物？
    - 在实际的内部价值创建路径中，非理想的因素使我们必须安排哪些操作数、过程及工具性的形式对象？
    - 有哪些起到支持作用的功能及其工具，能够为价值创建路径中的工具对象提供支持？
    - 有哪些接口位于系统边界上？有哪些需要传递或共享的操作数？接口所在的地方有哪些过程？构成接口的工具对象是什么？这些对象之间有什么关联？
    - 与体现主要功能和次要功能有关的那些过程，是按什么顺序来执行的？
    - 还有没有其它功能也在同时按顺序执行着？
    - 对理解系统的操作来说，实际的时钟时间是否起着重要作用？还有没有时间方面的问题或限制需要处理？
- **价值与架构原则**：优秀的架构是用极简的形式来达成令人满意的功能，适当的价值是由极少的成本所创造出来的利益
- 系统架构由工具**对象**与内部**过程**之间的**映射**所组成
- 形式工具与过程之间的关系可以是**一对一**、**一对多**、**多对一**
- 定义接口需要描述三方面内容：**操作数**、**过程**、**工具**，并且三者都是跨过系统边界的
- **操作成本**是决定系统是否具备竞争力的一项关键因素

### 第7章 与特定解决方案无关的功能和概念

- 确定系统的概念时需要思考的问题
    - 谁是受益者？他们的需求是什么？为了满足需求，需要改变哪一个与特定解决方案无关的操作数的状态？与价值有关的属性是什么，改变状态所用的与特定解决方案无关的过程是什么？这些操作数和过程，还具备其他哪些属性？
    - 系统对外体现的、与价值相关的主要功能是什么？与价值相关的特定操作数是什么，该操作数具备哪些与价值相关的状态，这些状态如何为特定的过程所改变？对工具形式所做的抽象是什么？概念是什么？还有其他哪些概念也能满足与特定解决方案无关的功能？
    - 主要的内部功能是什么？内部操作数与过程是什么？对这些过程所做的特化是什么？概念片段是什么？整体概念是什么？操作概念是什么？
- 系统的**功能意图**，应该描述成与**特定解决方案无关**的功能，其由操作数和过程所组成，二者联系起来可以体现出系统的价值
**与特定解决方案无关的功能原则**：使用与特定解决方案无关的功能及语言结构来描述系统，以便使架构师意识到该问题的探索空间是相当广阔的
- 概念是把**功能映射到形式**的系统图景，可以用来解释架构方面的细节，并对架构的研发做出指导
- 架构师在深入研究系统的架构细节之前，一定要先对各种候选概念做一个**全面**的了解
- 概念之间会形成一套体系，某一个级别中的特定功能，对于它的**下一个级别**来说，就成了与特定解决方案无关的功能意图。为了更好地理解意图体系，架构师应该沿着当前系统向上推导**一层或两层**
- **操作概念**定义了系统在传达价值时如何进行实际的操作

### 第8章 从概念到架构

- 进行系统合成时需要思考的问题
    - 怎样把系统之下第1级的架构扩展到系统之下第2级？
    - 用什么样的方案可以对系统之下第2级的对象进行模块化？
- 把概念扩展为功能架构，首先要确定系统在体现其主要价值时所依循的**价值通路**，从整体概念中确定关键的**内部函数**，并将这些函数链接起来
- **系统本身(第0级)的信息**是研发架构时的**出发点**，包括：与特定解决方案无关的功能、与特定解决方案有关的概念和操作概念
- **功能-目标思考法**：把上一级中的解决方案当成下一级的问题描述
- 第2级架构用于确保第1级架构足够**精确**，并保证内部模块和接口的边界处于**恰当**的位置上
- **聚类算法**可以重新把实体排列成多个组，以尽量**增加**组内各实体之间所发生的交互，并尽量**降低**组与组之间的交互

### 第9章 架构师的角色

- 架构师的主要三个职责：**减少歧义**、**发挥创造力**、**管理复杂度**
- **未知的未知**比已知的未知更可怕，因为自己也不知道是否缺少了某一条信息
- **歧义原则**：系统架构的早期阶段充满了歧义，架构师必须解决这种歧义，以便给团队定出目标，并持续更新目标
- 通用产品开发过程
    - **构思**：任务，概念设计
    - **设计**：初步设计，详细设计
    - **实现**：创建元素，安排集成测试
    - **运作**：生命周期支持，演化，反馈
- 单一的线性过程存在缺陷，需要不断地**迭代与反馈**进行改进，并且设定严格的**门径过关标准**
- **现代实践压力原则**：产品开发过程是由多个分布式团队同时进行的，更加需要有优秀的架构，至关重要的事情，不能受制于微不足道的小事

### 第10章 上游和下游对系统架构的影响

- **架构决策原则**：架构决策影响力非常深远，要与其它决策分开并提前、谨慎地决定这些问题，因为后续如果再想变更会付出很高的代价
- 上游的影响因素：
    - **公司策略**：任务和范围、企业目标、资源分配决策、措施及行动计划
    - **营销**：利益相关者及其需求、市场细分/规模/渗透、竞争者与竞争产品、外向营销
    - **法规及类似法规的因素**：遵守法规、注意可能会出台的法规、符合标准、遵守企业责任
    - **技术融合**：是否已准备就绪、能否带来额外价值、怎样有效地应用在产品或系统中
- 下游的影响因素：
    - **实现**：构思设计+采购供应=实现运作
    - **操作**：预备->设置->运行->复位->还原->维护，偶发/应急/独立操作
    - **Design for X**：为了满足某些特性而遵循的设计准则，15种“某某性”的性质
    - **产品与系统的演化、产品系列**：复用遗留元素、产品系列、平台与架构
- **架构商业论证决策框架**：商业论证的开发流程，与系统架构的选择流程之间，存在着强烈的互动

### 第11章 将需求转换为目标

- 确定**受益者**和**利益相关者**：为体现产品的价值，必须在利益相关者中，关注主要的那个受益者
- 描述利益相关者的**需求**：先从主要受益者及其需求开始分析，已经表达的、尚未表达的、未意识到的
- 利益相关者的**分组**：必须考虑且满足、必须考虑且应该满足、应该考虑且有可能满足
- **Kano分析模型**：要求提出需求的人根据自己在该需求存在或缺失时的态度，划分成**必须有**、**应该有**、**可以有**3种类型
- 对各个需求的排序，需要按照他们给项目提供的**价值**来进行排列
- 目标是为了满足需求而制定的决策，应该依据**有代表性的**、**完备的**、**可以由人类解决的**、**一致的**、**可达成的**5项标准来制定
- 使用**To-By-Using**框架描述问题：为了(与特定解决方案无关的转化)...通过做某些事(与特定解决方案有关的操作过程)...使用(特定的系统形式对象)...
- 目标按照优先级分为3类：**关键目标**(必须)、**重要目标**(应该)、**理想目标**(可以)，注意目标的严格程度与目标的重要程度并没有必然的联系

### 第12章 用创造力生成概念

- 创新必须**有意识**地进行，但**不一定**非要产生影响或效果，如果在创新时过分关注效果，可能会使创造力本身受限制
- **概念构想的4个步骤**：提出概念、扩充概念并提出概念片段、演化并完善整体概念、选出几个整体概念进一步发展
- 架构师在概念生成阶段的职责是要**多保留一些选项**，不要在压力之下过早地进行筛选并把资源集中到某一个概念上
- 对概念筛选的两个标准：
    - 能否**满足**之前已经排好顺序的目标
    - 能否**发展**为良好的架构

### 第13章 把分解作为复杂度管理工具来使用

- 复杂度的**衡量指标**：物体的数量、物体类型的数量、接口的数量、接口类型的数量
- 系统的**实际复杂度**总是会超过**必备复杂度**，架构师既要使两者尽可能接近，也要把**表面复杂度**控制在人类可理解的范围内
- **2下1上分解原则**：想要判断在第一层所做的分解是否合适，必须再向下分解到第二层并确定关系进行分组，选出最能反映分组情况的方式来对第一层进行模块化
- 对架构进行分解时，最关键的决策是**所选的分解平面**，它会影响读者或用户的理解

### 第14章 作为决策制定过程的系统架构

- 系统架构工作本质是一种**决策制定**的过程，利用各种**决策支持工具**可以帮助完成架构
- 做决策时可以参考的**经验法则**：
    - 谨慎地给待考虑的架构空间划定边界
    - 决策应该要能够大幅度地影响评估架构所用的衡量指标
    - 决策模型只应该包含架构方面的决策
- 决策制定的**关键**：
    - 必须要有一种包含多个备选方案的空间
    - 必须要做出一种能够对这个解决方案空间进行划分的选择
    - 必须要通过做这项决策来达成某种期望的效果
- **决策支持**的4个阶段过程：情报活动、设计活动、选择活动、评审活动
- **决策支持系统**的4个层面：展示、结构、模拟、查看

### 第15章 探求架构的权衡空间

- 使用**权衡空间**进行思考，把各种有可能成立的方案全都列出来，然后加以整理和评估，最后再进行筛选
- **帕累托前沿**：位于极限边缘的架构，由**非劣的架构**所形成的集合，在权衡空间图上可以表示为Utopia点之外的一条凸曲线
- 如果架构方面的某一项特征在目标空间中的某个区域内占据主导地位，那么就会出现相应的**集群**
- **敏感度分析**：确认建模对输入值的变化有多敏感，如果结果依赖于某个参数的取值，应该深入研究问题中对应的部分
- **架构健壮程度原则**：能够应对变化的架构，要么比较健壮，要么适应能力比较强；在选择架构时，需要同时考虑帕累托**最优性**、**健壮性**、**适应力**三个因素
- 一项架构决策成为高影响力决策的原因有两点：
    - 衡量指标对该决策的**敏感程度**比较高
    - 该决策与其它决策之间的**耦合程度**比较高
- 根据**四象限法**来排定架构的先后顺序，对**敏感度和耦合度都比较高**的决策应该优先给予考虑

### 第16章 系统架构优化问题的表述与求解

- 架构衡量指标的数量以**2~5**个为好，大多数情况下最好能限制为**2~3**个
- 架构决策的6种模式：
    - **决策-选项模式**：有一系列待决策的问题，每个问题都有一套独立的选项集
    - **筛选模式**：从一系列候选元素中选出一部分构成子集，可视为一系列的二元决策，应该选择**协同度较高**且**干扰度和冗余度较低**的子集